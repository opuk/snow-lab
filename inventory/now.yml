plugin: servicenow.itsm.now
query:
  - os: = Linux Red Hat
columns:
  - fqdn
  - host_name
  - ip_address
  - name
  - os
  - environment
  - location
  # - u_business_identifier
  # - u_business_thing
groups:
  all_rhel_servers: os in ("Linux Red Hat", "RHEL")
  test_rhel_servers: >-
    environment == "Test" or classification == "Test" and
    os in ("Linux Red Hat", "RHEL")

  prod_rhel_servers: >-
    environment == "Production" or classification == "Production" and
    os in ("Linux Red Hat", "RHEL")

  emea_rhel_servers: >-
    location == "Emea" and
    os in ("Linux Red Hat", "RHEL")

  custom_rhel_servers: >-
    u_business_identifier == "73" and
    os in ("Linux Red Hat", "RHEL")
compose:
  ansible_host: fqdn

#plugin: servicenow.itsm.now
#enhanced: false
#strict: false
#query:
#  - os: = Linux Red Hat
#keyed_groups:
#  - key: os
#    #prefix: os
#    separator: ""
#  - key: location
#    separator: ""
#    #prefix: location
#  - key: environment
#    separator: ""
#    #prefix: env
#compose:
#  ansible_host: fqdn
